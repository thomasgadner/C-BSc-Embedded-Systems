Version 4
SHEET 1 4612 2004
WIRE 1584 -528 1488 -528
WIRE 1008 -480 688 -480
WIRE 1488 -480 1488 -528
WIRE 1488 -480 1008 -480
WIRE 1584 -480 1488 -480
WIRE 1856 -480 1696 -480
WIRE 2000 -480 1936 -480
WIRE 2000 -448 2000 -480
WIRE 1008 -432 1008 -480
WIRE 688 -416 688 -480
WIRE 2512 -384 2512 -464
WIRE 2608 -384 2512 -384
WIRE 2640 -384 2608 -384
WIRE 2832 -384 2784 -384
WIRE 3008 -384 2976 -384
WIRE 3216 -384 3152 -384
WIRE 3424 -384 3216 -384
WIRE 2608 -352 2608 -384
WIRE 1008 -320 1008 -368
WIRE 1008 -320 880 -320
WIRE 1584 -320 1008 -320
WIRE 1856 -320 1680 -320
WIRE 2000 -320 2000 -368
WIRE 2000 -320 1936 -320
WIRE 2944 -320 2944 -352
WIRE 2944 -320 2864 -320
WIRE 2944 -304 2944 -320
WIRE 3216 -272 3216 -384
WIRE 3264 -272 3216 -272
WIRE 3456 -272 3408 -272
WIRE 880 -256 880 -320
WIRE 1008 -240 1008 -320
WIRE 1872 -240 1872 -272
WIRE 2608 -240 2608 -272
WIRE 2720 -240 2720 -320
WIRE 2720 -240 2608 -240
WIRE 1920 -208 1920 -272
WIRE 1920 -208 1680 -208
WIRE 3088 -208 3088 -320
WIRE 3376 -208 3376 -240
WIRE 3376 -208 3296 -208
WIRE 3376 -192 3376 -208
WIRE 1840 -144 1776 -144
WIRE 2000 -144 1840 -144
WIRE 2176 -144 2144 -144
WIRE 2352 -144 2320 -144
WIRE 2512 -144 2512 -384
WIRE 2512 -144 2496 -144
WIRE 688 -112 688 -336
WIRE 880 -112 880 -176
WIRE 880 -112 688 -112
WIRE 1008 -112 1008 -176
WIRE 1008 -112 880 -112
WIRE 1776 -96 1776 -144
WIRE 2720 -96 2720 -240
WIRE 2816 -96 2720 -96
WIRE 3088 -80 3088 -128
WIRE 2656 -64 2656 -96
WIRE 688 -48 688 -112
WIRE 2432 -32 2432 -80
WIRE 2720 -32 2720 -96
WIRE 2384 -16 2352 -16
WIRE 1776 32 1776 -16
WIRE 2256 80 2256 -80
WIRE 2720 96 2720 48
WIRE 1872 272 1792 272
WIRE 2032 272 1952 272
WIRE 2112 272 2032 272
WIRE 2416 272 2352 272
WIRE 576 304 384 304
WIRE 1024 304 720 304
WIRE 1040 304 1024 304
WIRE 1792 320 1792 272
WIRE 1520 336 1520 288
WIRE 2032 336 2032 272
WIRE 2352 336 2352 272
WIRE 384 416 384 304
WIRE 656 448 656 368
WIRE 1520 464 1520 416
WIRE 1792 464 1792 400
WIRE 2032 464 2032 400
WIRE 2352 464 2352 416
WIRE 2432 576 2352 576
WIRE 2592 576 2512 576
WIRE 2672 576 2592 576
WIRE 2352 624 2352 576
WIRE 2592 640 2592 576
WIRE 1808 656 1808 624
WIRE 2352 768 2352 704
WIRE 2592 768 2592 704
FLAG 1792 464 0
FLAG 2032 464 0
FLAG 2112 272 El_Power
FLAG 1696 -480 M+
FLAG 1680 -320 M-
FLAG 1776 32 0
FLAG 2512 -464 Torque
FLAG 1680 -208 Wmech
FLAG 1584 -480 M+
FLAG 1584 -320 M-
FLAG 1584 -528 PWR
FLAG 3424 -384 Wmech
FLAG 3088 -80 0
FLAG 2720 96 0
FLAG 2416 272 Shaft_Power
FLAG 2352 464 0
FLAG 2816 -96 Load
FLAG 3456 -272 RPM
FLAG 2944 -304 0
FLAG 3376 -192 0
FLAG 1872 -240 0
FLAG 1840 -144 Tem
FLAG 2656 -64 0
FLAG 2432 48 0
FLAG 2384 32 0
FLAG 2352 -16 Wmech
FLAG 1520 464 0
FLAG 1520 288 BEMF
FLAG 2000 -320 Vbemf
FLAG 1808 736 0
FLAG 1808 624 Efficiency
FLAG 2080 48 0
FLAG 2352 768 0
FLAG 2592 768 0
FLAG 2672 576 Wmech_flt
FLAG 2256 160 0
FLAG 832 -192 0
FLAG 688 -48 0
FLAG 832 -240 Bbot
FLAG 384 496 0
FLAG 656 528 0
FLAG 2080 -80 0
FLAG 1024 304 Bbot
SYMBOL bv 1792 304 R0
SYMATTR InstName B1
SYMATTR Value V=(V(M+)-V(M-))*I(L2)
SYMBOL res 1968 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 5k
SYMBOL cap 2016 336 R0
SYMATTR InstName C3
SYMATTR Value 0.047µF
SYMBOL res 1984 -464 R0
SYMATTR InstName R15
SYMATTR Value {Rt}
SYMBOL ind 1840 -464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value {L}
SYMBOL bv 1776 -112 R0
WINDOW 3 44 57 Left 2
SYMATTR Value V=I(L2)*Kt
SYMATTR InstName B2
SYMBOL e 1952 -320 M270
SYMATTR InstName E5
SYMATTR Value {Kemf}
SYMBOL Subtractor 2720 -384 R0
SYMATTR InstName X1
SYMBOL Integrator 3088 -384 R0
SYMATTR InstName X2
SYMBOL voltage 2720 -48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PWL(0 0 0.06 0 0.061 0.2612)
SYMBOL voltage 3088 -224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL bv 2352 320 R0
SYMATTR InstName B3
SYMATTR Value V = V(Torque) * V(Wmech)
SYMBOL Gain 2880 -416 R0
WINDOW 3 -82 -41 Left 2
SYMATTR Value {1/(Jmotor + Jload)}
SYMATTR InstName E4
SYMBOL Gain 3312 -304 R0
WINDOW 3 -28 32 Left 2
SYMATTR Value {30 / pi}
SYMATTR InstName E1
SYMBOL res 2592 -368 R0
SYMATTR InstName R1
SYMATTR Value 1K
SYMBOL Subtractor 2256 -144 R0
SYMATTR InstName X3
SYMBOL voltage 2256 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Friction
SYMATTR Value 0.0141
SYMBOL Subtractor 2432 -144 R0
SYMATTR InstName X4
SYMBOL e 2432 -48 R0
SYMATTR InstName E2
SYMATTR Value 1.28e-5
SYMBOL bv 1520 320 R0
SYMATTR InstName B4
SYMATTR Value V=V(Vbemf)-V(M-)
SYMBOL bv 1808 640 R0
SYMATTR InstName B5
SYMATTR Value V=V(shaft_power) / V(el_power)*100
SYMBOL Subtractor 2080 -144 R0
SYMATTR InstName X5
SYMBOL bv 2080 -48 R0
WINDOW 3 -528 130 Left 2
SYMATTR Value V=if(V(Wmech_flt)<200,0,{Rt}*I(L2)**2 / V(Wmech_flt))
SYMATTR InstName B6
SYMBOL res 2528 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 50k
SYMBOL cap 2576 640 R0
SYMATTR InstName C1
SYMATTR Value 0.047µF
SYMBOL bv 2352 608 R0
SYMATTR InstName B7
SYMATTR Value V=V(Wmech)
SYMBOL sw 880 -160 M180
SYMATTR InstName S4
SYMATTR Value VCS
SYMBOL diode 1024 -176 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value MyD
SYMBOL voltage 688 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL Subtractor 656 304 R0
SYMATTR InstName X6
SYMBOL voltage 384 400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 0.5
SYMBOL voltage 656 432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(-1 1 0 {p/2} {p/2} 0 {p})
SYMBOL diode 1024 -368 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value MyD
TEXT 3216 -552 Left 2 !.tran 0 0.5 0 1m uic
TEXT 3216 -592 Left 2 ;DC MOTOR MODEL
TEXT 1768 -576 Left 2 ;Motor Model (Pittman DC Servo Motor\nModel 14206 with 24V Winding)
TEXT 1872 128 Left 2 ;Friction\nMotor Bearings and Brushes
TEXT 2728 472 Left 2 !.param Jload=0
TEXT 2576 -584 Left 2 ;LOAD
TEXT 3376 -352 Left 2 ;Radians/sec
TEXT 2888 -120 Left 2 ;load\ntorque
TEXT 2728 248 Left 2 !.param Kt = 0.071
TEXT 2728 440 Left 2 !.param Jmotor = 37E-6
TEXT 2728 280 Left 2 !.param Kemf = 0.071
TEXT 3000 248 Left 2 ;Newton-Meters/Amp
TEXT 3000 280 Left 2 ;Volts/(radian/sec)
TEXT 2728 312 Left 2 !.param Kf = 0.014
TEXT 3000 312 Left 2 ;Newton-Meters
TEXT 2728 344 Left 2 !.param Kd = 13E-6
TEXT 3000 344 Left 2 ;Newton-Meters/(radian/sec)
TEXT 2728 376 Left 2 !.param Rt = 0.84
TEXT 2728 408 Left 2 !.param L = 1.36E-3
TEXT 3000 440 Left 2 ;Kilograms-Meter^2
TEXT 3000 408 Left 2 ;Henries
TEXT 3000 376 Left 2 ;Ohms
TEXT 3000 472 Left 2 ;Kilograms-Meter^2 (use 0 for no load inertia, or as an example 100E-6)
TEXT 3216 -528 Left 2 !.options method = gear
TEXT 2736 -176 Left 2 ;Cut here to lock rotor
TEXT 2712 -176 Left 2 ;X
TEXT 2384 96 Left 2 ;Damping
TEXT 848 -888 Left 2 !.model VCS SW(Ron=1e-9 Roff=10T Vt=0)
TEXT 848 -856 Left 2 !.model MyD D(Ron=0.01 Roff=100Meg Vfwd=0.1)
TEXT 696 576 Left 2 !.param p=50us
RECTANGLE Normal 2464 208 1752 -608
RECTANGLE Normal 3176 208 2568 -608
